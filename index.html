<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <title>№4 Алға орта мектебі – Қатысым</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- STYLE -->
  <link rel="stylesheet" href="style.css" />

  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f5f7fb; }
    header { background:#0a58ca; color:#fff; padding:12px 20px; display:flex; align-items:center; justify-content:space-between; }
    header nav a { color:#fff; margin-right:20px; text-decoration:none; font-weight:600; }
    header nav a:hover { text-decoration:underline; }

    main { padding:20px; }

    h2 { margin-top:0; }

    .card { background:#fff; padding:16px; border-radius:10px; margin-bottom:20px; box-shadow:0 2px 6px rgba(0,0,0,.05); }

    .controls { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:15px; }
    .controls label { font-size:14px; }

    select, input[type="date"], input[type="text"], input[type="month"], input[type="number"] {
      padding:6px 8px;
      border-radius:6px;
      border:1px solid #ccc;
    }

    button {
      background:#ffc107;
      border:none;
      padding:8px 14px;
      border-radius:20px;
      cursor:pointer;
      font-weight:600;
    }
    button:hover { opacity:.9; }

    table { width:100%; border-collapse:collapse; }
    th, td { border-bottom:1px solid #eee; padding:8px; text-align:left; }
    th { background:#f0f3f8; }

    .status-cell { display:flex; gap:6px; align-items:center; }
    .status-text { font-weight:600; }

    .present { background:#e7f7ed; }
    .late { background:#fff7e6; }
    .sick { background:#e8f1ff; }
    .excused { background:#f1e7ff; }
    .absent { background:#ffe7e7; }

    .stats { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:10px; }
    .stat { background:#f8f9fc; padding:12px; border-radius:10px; text-align:center; }

    footer { text-align:center; padding:10px; color:#777; font-size:13px; }
  </style>
</head>

<body data-lang="kk">

<header>
  <div>
    <strong>№4 Алға орта мектебі</strong>
  </div>
  <nav>
    <a href="#attendance">Қатысым</a>
    <a href="#stats">Статистика</a>
  </nav>
  <button id="langToggle">KZ / RU</button>
</header>

<main>

  <!-- ===================== -->
  <!-- ҚАТЫСЫМ БЕЛГІЛЕУ -->
  <!-- ===================== -->
  <section id="attendance" class="card">
    <h2>Қатысым белгілеу</h2>

    <div class="controls">
      <label>
        Күні:
        <input type="date" id="attendanceDate">
      </label>

      <label>
        Сынып:
        <select id="classSelect"></select>
      </label>

      <label>
        ФИО бойынша іздеу:
        <input type="text" id="searchInput" placeholder="Оқушының аты-жөні">
      </label>
    </div>

    <table id="attendanceTable">
      <thead>
        <tr>
          <th>№</th>
          <th>Оқушының аты-жөні</th>
          <th>Сынып</th>
          <th>Статус</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div style="margin-top:12px; display:flex; gap:10px; align-items:center;">
      <button id="saveAttendanceBtn">Сақтау</button>
      <span id="saveStatus"></span>
    </div>
  </section>

  <!-- ===================== -->
  <!-- СТАТИСТИКА -->
  <!-- ===================== -->
  <section id="stats" class="card">
    <h2>Статистика және рейтинг</h2>

    <div class="controls">
      <label>
        Кезең:
        <select id="periodType">
          <option value="all">Барлығы</option>
          <option value="month">Ай</option>
          <option value="quarter">Тоқсан</option>
          <option value="year">Жыл</option>
          <option value="custom">Өзгеше</option>
        </select>
      </label>

      <div id="monthControl" style="display:none;">
        <input type="month" id="monthInput">
      </div>

      <div id="quarterControl" style="display:none;">
        <select id="quarterInput">
          <option value="1">I тоқсан</option>
          <option value="2">II тоқсан</option>
          <option value="3">III тоқсан</option>
          <option value="4">IV тоқсан</option>
        </select>
        <input type="number" id="quarterYearInput" style="width:80px;">
      </div>

      <div id="yearControl" style="display:none;">
        <input type="number" id="yearInput" style="width:80px;">
      </div>

      <div id="customControl" style="display:none;">
        <input type="date" id="customStart">
        <input type="date" id="customEnd">
      </div>

      <label>
        Сынып (есеп):
        <select id="reportClass"></select>
      </label>

      <button id="updateStatsBtn">Статистиканы жаңарту</button>
      <button id="exportCsvBtn">CSV экспорт</button>
    </div>

    <div class="stats">
      <div class="stat">Барлығы<br><strong id="totalLessons">0</strong></div>
      <div class="stat">Қатысты<br><strong id="totalPresent">0</strong></div>
      <div class="stat">Кешікті<br><strong id="totalLate">0</strong></div>
      <div class="stat">Ауырды<br><strong id="totalSick">0</strong></div>
      <div class="stat">Себепті<br><strong id="totalExcused">0</strong></div>
      <div class="stat">Себепсіз<br><strong id="totalUnexcused">0</strong></div>
    </div>

    <h3>TOP кешіккен оқушылар</h3>
    <table id="topLateTable">
      <thead>
        <tr><th>№</th><th>Оқушы</th><th>Сынып</th><th>Саны</th></tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>TOP себепсіз қалған оқушылар</h3>
    <table id="topUnexcusedTable">
      <thead>
        <tr><th>№</th><th>Оқушы</th><th>Сынып</th><th>Саны</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

</main>

<footer>
  © 2025 №4 Алға орта мектебі — Сабаққа қатысым жүйесі
</footer>

<!-- JS -->
<script src="app.js"></script>

</body>
</html>
